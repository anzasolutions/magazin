<html><head><meta http-equiv=Content-Type content="text/html; charset=iso-8859-2"><link rel=stylesheet href=magazin.css TYPE=text/css><title>MagaZin #16 :: maj 2003</title></head><body link=#2078A8 vlink=#2078A8 alink=#2078A8 topmargin=0 bottommargin=0 bgcolor=#000000><div align=center><table border=0 width=650 style="border-style: solid; border-width: 0" cellspacing=0 cellpadding=0 bgcolor=#FFFFFF><tr><td width=100% height=70 valign=middle background=../img/003b.png><div align=center><table border=0 width=550 cellspacing=0 cellpadding=0 height=28><tr><td width=550 align=center height=26 valign=bottom><p class=9ptV align=right><font color=#FFFFFF><b>MAGAZIN #16 :: STRONA 33</b></font></td></tr></table></div></td></tr><tr><center><td width=100% height=20 valign=bottom></center><div align=center><table border=0 width=586 height=20 cellspacing=0 cellpadding=0><tr><td width=135 background=../img/line3.gif><p align=right><img border=0 src=../img/line.gif></td><center><td width=330 valign=bottom><p align=center class=9ptV><a href=32.htm class=link2><font color=#2078A8>poprzednia strona</font></a><font color=#4048A8> </font><font color=#2078A8>::</font><font color=#4048A8> </font><a href=spis.htm class=link2><font color=#2078A8>spis tre¶ci</font></a><font color=#4048A8> </font><font color=#2078A8>::</font><font color=#4048A8> </font><a href=34.htm class=link2><font color=#2078A8>nastêpna strona</font></a></td><td width=135 background=../img/line3.gif><img border=0 src=../img/line2.gif width=9 height=20></td></tr></table></center></div></td></tr><tr><td width=100% height=5 valign=top><p class=9ptV>&nbsp;</td></tr><tr><td width=100% height=5 valign=top background=../img/back3b.gif><div align=center><table border=0 width=600 cellspacing=0 cellpadding=0><tr><td width=590 valign=top class=9ptV height=20 style="border-bottom: 1 solid #2078A8" colspan=4 bgcolor=#FFFFFF><b><font color=#009830><img border=0 src=../img/kwad.gif width=8 height=8> </font></b><b><font color=#2078A8>KURSY</font></b></td></tr><tr><td width=1 valign=top height=66><p align=right></td><td width=60 valign=top height=66><div align=center><center><table border=0 width=100% cellspacing=0 cellpadding=0 height=60><tr><td width=60 valign=bottom height=57><p align=right><img border=0 src=../img/m_direct_big.gif width=50 height=50></td></tr></table></center></div></td><td width=537 valign=middle height=70><i><font color=#2078A8><font face=Impact size=7>&nbsp;</font></font></i><font color=#2078A8><i><font face=Impact size=7>Kurs C++, cz. 9</font></i></font></td><td width=1 valign=bottom height=66></td></tr></table></div></td></tr><tr><center><td width=100% height=5 valign=top background=../img/back3b.gif></center><div align=center><table border=0 width=550 cellspacing=0 cellpadding=0><tr><td width=588 height=5></td></tr><tr><td width=588 valign=middle class=9ptV height=20 style="border-top: 1 solid #C0C0C0; border-bottom: 1 solid #C0C0C0"><div align=center><table border=0 width=570 cellspacing=0 cellpadding=0 height=25><tr><td width=100%><p align=center><font color=#009830>&nbsp;<img border=0 src=../img/goto3.gif> </font><a href=mailto:ralphick@poczta.onet.pl class=link2><b><font color=#2078A8>Ralfik</a></p></td></tr></table></div></td></tr><tr><td width=588 height=5></td></tr><tr><td width=588 height=10></td></tr></table></div></td></tr><center></center><center></center><tr><td width=100% height=21 valign=top background=../img/back3.gif><div align=center><center><table border=0 width=600 cellspacing=0 cellpadding=8><tr><td width=50% valign=top><p class=9ptV style="line-height: 130%" align=justify><font color=#2078A8>Witam ponownie w k±ciku C++. Dzisiaj zobaczymy jak C++ radzi sobie z napisami. Ogólnie rzecz bior±c ka¿dy jêzyk programowania (no mo¿e nie ka¿dy, ale chyba wiêkszo¶æ tych typowych) umo¿liwia wykorzystywanie napisów i dostarcza ró¿nych funkcji do manipulacji napisami. A je¶li bezpo¶rednio tego nie robi, to dostêpne s± odpowiednie biblioteki zawieraj±ce ca³± masê funkcji, które z napisami robi± ró¿ne cuda.</p><table border=0 width=100% cellspacing=0 cellpadding=0 style="border-left: 5 solid #2078A8; border-bottom: 1 solid #2078A8"><tr><td width=100%><b><font color=#000000 face=arial size=3>&nbsp;Pobawmy siê napisami</font></b></td></tr></table><p class=9ptV style="line-height: 130%" align=justify><font color=#000000><img border=0 src=../img/bl2/003_z.gif style="float: left; margin-right: 4; margin-top: 4"><p class=9ptV style="line-height: 130%" align=justify><font color=#000000>awê¼my teraz nasze rozwa¿ania do pewnego jêzyka z plusami w nazwie :). Tutaj sytuacja wygl±da nastêpuj±co: napis jest po prostu tablic± znaków zakoñczonych zerem (znakiem o kodzie 0, czyli tzw. NULLem).<p class=9ptV style="line-height: 130%" align=justify><font color=#2078A8>char napis[10];<p class=9ptV style="line-height: 130%" align=justify><font color=#000000>Tablica napis mo¿e teraz przechowaæ napisy o d³ugo¶ci do 9 znaków. Nie do dziesiêciu, bo jedno pole tablicy trzeba u¿yæ do wpisania tam zera, które oznacza koniec napisu. Aby wstawiæ jaki¶ tekst (napis2) do tablicy napis1, mo¿na wstawiæ po kolei litery tego tekstu.<p class=9ptV style="line-height: 130%" align=justify><font color=#2078A8>void kopiuj(char *napis1, char *napis2, int n)<br> {<br> // kopiuje z napis2 do napis1 n znaków<br> for(int i=0; i<n; i++)<br> napis1[i] = napis2[i];<br> napis1[n] = 0; // Koniec napisu<br> }<br><p class=9ptV style="line-height: 130%" align=justify><font color=#000000>Mo¿na to wykorzystaæ w programie np. tak:<p class=9ptV style="line-height: 130%" align=justify><font color=#2078A8>char t1[] = {"Jakis niepotrzebny napis"};<br><br> /* t1 przyjmie w³a¶ciwy rozmiar, tzn. dlugosc napisu plus dodatkowe pole na znak 0 oznaczajacy koniec napisu */<br><br> char t2[100];<br><br> kopiuj(t2, t1, 18);<br><br> /* Do t2 zostanie przekopiowanych 18 pierwszych znakow z t1 */<br><br> cout<<"t1 = "<<t1<<endl;<br> cout<<"t2 = "<<t2<<endl;<br><br> /* Wypisanie napisow */<p class=9ptV style="line-height: 130%" align=justify><font color=#000000>Poniewa¿ wiemy ju¿ mniej wiêcej jak ugry¼æ napisy, wiêc mo¿emy sobie teraz powymy¶laæ ró¿ne funkcje, które bêd± manipulowaæ napisami. Jest tylko jedna uwaga - taka sama, jak by³a przy tablicach - to my musimy martwiæ siê, czy przypadkiem nie wstawiamy znaków poza tablic±.<br><br> A jakie funkcje mo¿emy sobie powymy¶laæ? Jakie chcemy (w zale¿no¶ci od potrzeb, kaprysów i umiejêtno¶ci). Na przyk³ad mo¿e to byæ zwracanie d³ugo¶ci napisu, zwracanie liczby samog³osek, ³±czenie dwóch napisów, wycinanie podnapisów, sprawdzanie czy wyraz jest palindromem (czy czytany od pocz±tku i od koñca daje ten sam wyraz; palindromem jest np. wyraz kajak) i wiele innych, które przyjd± nam do g³owy.<br><br> Przedstawiê mo¿e jedn± z najprostszych, a mianowicie zwracanie d³ugo¶ci napisu. Zwracana jest d³ugo¶æ napisu, tzn. ilo¶æ liter, z których sk³ada siê napis.<p class=9ptV style="line-height: 130%" align=justify><font color=#2078A8>int dlugosc(char *napis)<br> {<br> int i=0;<br> while(napis[i])<br> i++;<br> return i;<br> }<p class=9ptV style="line-height: 130%" align=justify><font color=#000000>Funkcja jest ¶miesznie prosta - chodzimy w pêtli i sprawdzamy kolejne znaki napisu. W momencie, gdy natrafimy na znak równy 0 (to jest w³a¶nie NULL, czyli koniec napisu), to przerywamy pêtlê i zwracamy warto¶æ i (która zawiera d³ugo¶æ napisu).<br><br> Oczywi¶cie niektóre typowe operacje na napisach bêd± powtarzaæ siê w wielu programach. Dlatego stworzono standardow± bibliotekê do ich obs³ugi. Aby j± wykorzystaæ, wystarczy na pocz±tku programu (np. pod albo nad #include <iostream.h>) dopisaæ #include <string.h>. Teraz mo¿na wykorzystaæ wszystkie funkcje, które dostarcza ta biblioteka. A jakie to funkcje? Opis mo¿na znale¼æ w dokumentacji lub w Internecie. Ja znalaz³em na stronie <a href=http://www.cplusplus.com/ class=link2>www.cplusplus.com</a> (jest tam te¿ kompletny tutorial do C++: <a href=http://www.cplusplus/doc/tutorial/ class=link2>www.cplusplus.com/doc/tutorial</a> taki opis (mam nadziejê, ¿e nie przera¿a was jêzyk angielski; trzeba jednak szczerze przyznaæ, ¿e ca³a masa dokumentacji do C++ i jego bibliotek a tak¿e do innych jêzyków programowania czêsto wystêpuje w³a¶nie po angielsku):</p></td><td width=50% valign=top><table border=0 width=100% cellspacing=0 cellpadding=0 style="border-left: 5 solid #2078A8; border-bottom: 1 solid #2078A8"><tr><td width=100%><b><font color=#000000 face=arial size=3>&nbsp;string.h</font></b></td></tr></table></p><div align=center><table border=0 cellspacing=0 cellpadding=6 width=100%><tr><td align=center width=33% style="border-top: 1 solid #1F77A4; border-bottom: 1 solid #1F77A4" bgcolor=#F2FAFD><font face=Tahoma size=1>memchr</font></td><td align=center width=66% style="border-top: 1 solid #1F77A4; border-left: 1 solid #1F77A4; border-bottom: 1 solid #1F77A4"><font face=Tahoma size=1>Search buffer for a character</td></tr><tr><td align=center width=33% style="border-bottom: 1 solid #1F77A4" bgcolor=#F2FAFD><font face=Tahoma size=1>memcmp</font></td><td align=center width=66% style="border-left: 1 solid #1F77A4; border-bottom: 1 solid #1F77A4"><font face=Tahoma size=1>Compare two buffers</td></tr><tr><td align=center width=33% style="border-bottom: 1 solid #1F77A4" bgcolor=#F2FAFD><font face=Tahoma size=1>memcpy</font></td><td align=center width=66% style="border-left: 1 solid #1F77A4; border-bottom: 1 solid #1F77A4"><font face=Tahoma size=1>Copy bytes to buffer from buffer</td></tr><tr><td align=center width=33% style="border-bottom: 1 solid #1F77A4" bgcolor=#F2FAFD><font face=Tahoma size=1>memmove</font></td><td align=center width=66% style="border-left: 1 solid #1F77A4; border-bottom: 1 solid #1F77A4"><font face=Tahoma size=1>Copy bytes to buffer from buffer</td></tr><tr><td align=center width=33% style="border-bottom: 1 solid #1F77A4" bgcolor=#F2FAFD><font face=Tahoma size=1>memset</font></td><td align=center width=66% style="border-left: 1 solid #1F77A4; border-bottom: 1 solid #1F77A4"><font face=Tahoma size=1>Fill buffer with specified character</td></tr><tr><td align=center width=33% style="border-bottom: 1 solid #1F77A4" bgcolor=#F2FAFD><font face=Tahoma size=1>strcat</font></td><td align=center width=66% style="border-left: 1 solid #1F77A4; border-bottom: 1 solid #1F77A4"><font face=Tahoma size=1>Append string</td></tr><tr><td align=center width=33% style="border-bottom: 1 solid #1F77A4" bgcolor=#F2FAFD><font face=Tahoma size=1>strchr</font></td><td align=center width=66% style="border-left: 1 solid #1F77A4; border-bottom: 1 solid #1F77A4"><font face=Tahoma size=1>Find character in string</td></tr><tr><td align=center width=33% style="border-bottom: 1 solid #1F77A4" bgcolor=#F2FAFD><font face=Tahoma size=1>strcmp</font></td><td align=center width=66% style="border-left: 1 solid #1F77A4; border-bottom: 1 solid #1F77A4"><font face=Tahoma size=1>Compare two strings</td></tr><tr><td align=center width=33% style="border-bottom: 1 solid #1F77A4" bgcolor=#F2FAFD><font face=Tahoma size=1>strcoll</font></td><td align=center width=66% style="border-left: 1 solid #1F77A4; border-bottom: 1 solid #1F77A4"><font face=Tahoma size=1>Compare two strings using locale settings</td></tr><tr><td align=center width=33% style="border-bottom: 1 solid #1F77A4" bgcolor=#F2FAFD><font face=Tahoma size=1>strcpy</font></td><td align=center width=66% style="border-left: 1 solid #1F77A4; border-bottom: 1 solid #1F77A4"><font face=Tahoma size=1>Copy string</td></tr><tr><td align=center width=33% style="border-bottom: 1 solid #1F77A4" bgcolor=#F2FAFD><font face=Tahoma size=1>strcspn</font></td><td align=center width=66% style="border-left: 1 solid #1F77A4; border-bottom: 1 solid #1F77A4"><font face=Tahoma size=1>Search string for occurrence of charcter set</td></tr><tr><td align=center width=33% style="border-bottom: 1 solid #1F77A4" bgcolor=#F2FAFD><font face=Tahoma size=1>strerror</font></td><td align=center width=66% style="border-left: 1 solid #1F77A4; border-bottom: 1 solid #1F77A4"><font face=Tahoma size=1>Get pointer to error message string</td></tr><tr><td align=center width=33% style="border-bottom: 1 solid #1F77A4" bgcolor=#F2FAFD><font face=Tahoma size=1>strlen</font></td><td align=center width=66% style="border-left: 1 solid #1F77A4; border-bottom: 1 solid #1F77A4"><font face=Tahoma size=1>Return string length</td></tr><tr><td align=center width=33% style="border-bottom: 1 solid #1F77A4" bgcolor=#F2FAFD><font face=Tahoma size=1>strncat</font></td><td align=center width=66% style="border-left: 1 solid #1F77A4; border-bottom: 1 solid #1F77A4"><font face=Tahoma size=1>Append substring to string</td></tr><tr><td align=center width=33% style="border-bottom: 1 solid #1F77A4" bgcolor=#F2FAFD><font face=Tahoma size=1>strncmp</font></td><td align=center width=66% style="border-left: 1 solid #1F77A4; border-bottom: 1 solid #1F77A4"><font face=Tahoma size=1>Compare some characters of two strings</td></tr><tr><td align=center width=33% style="border-bottom: 1 solid #1F77A4" bgcolor=#F2FAFD><font face=Tahoma size=1>strncpy</font></td><td align=center width=66% style="border-left: 1 solid #1F77A4; border-bottom: 1 solid #1F77A4"><font face=Tahoma size=1>Copy characters from one string to another</td></tr><tr><td align=center width=33% style="border-bottom: 1 solid #1F77A4" bgcolor=#F2FAFD><font face=Tahoma size=1>strpbrk</font></td><td align=center width=66% style="border-left: 1 solid #1F77A4; border-bottom: 1 solid #1F77A4"><font face=Tahoma size=1>Scan string for specified characters</td></tr><tr><td align=center width=33% style="border-bottom: 1 solid #1F77A4" bgcolor=#F2FAFD><font face=Tahoma size=1>strrchr</font></td><td align=center width=66% style="border-left: 1 solid #1F77A4; border-bottom: 1 solid #1F77A4"><font face=Tahoma size=1>Find last occurrence of character in string</td></tr><tr><td align=center width=33% style="border-bottom: 1 solid #1F77A4" bgcolor=#F2FAFD><font face=Tahoma size=1>strspn</font></td><td align=center width=66% style="border-left: 1 solid #1F77A4; border-bottom: 1 solid #1F77A4"><font face=Tahoma size=1>Get length of substring composed of given characters</td></tr><tr><td align=center width=33% style="border-bottom: 1 solid #1F77A4" bgcolor=#F2FAFD><font face=Tahoma size=1>strstr</font></td><td align=center width=66% style="border-left: 1 solid #1F77A4; border-bottom: 1 solid #1F77A4"><font face=Tahoma size=1>Find substring</td></tr><tr><td align=center width=33% style="border-bottom: 1 solid #1F77A4" bgcolor=#F2FAFD><font face=Tahoma size=1>strtok</font></td><td align=center width=66% style="border-left: 1 solid #1F77A4; border-bottom: 1 solid #1F77A4"><font face=Tahoma size=1>Sequentially truncate string if delimiter is found</td></tr><tr><td align=center width=33% style="border-bottom: 1 solid #1F77A4" bgcolor=#F2FAFD><font face=Tahoma size=1>strxfrm</font></td><td align=center width=66% style="border-left: 1 solid #1F77A4; border-bottom: 1 solid #1F77A4"><font face=Tahoma size=1>Transform string using locale settings</td></tr></table></div><p class=9ptV style="line-height: 130%" align=justify><font color=#000000>W¶ród dostêpnych funkcji jest funkcja, która zwraca d³ugo¶æ napisu - strlen, a jej dalszy opis jest nastêpuj±cy:<p class=9ptV style="line-height: 130%" align=justify><font color=#2078A8>size_t strlen ( const char * string ); <br>Return string length. <br>Returns the number of characters in string before the terminating null-character.<p class=9ptV style="line-height: 130%" align=justify><font color=#000000>Parametrem tej funkcji jest zmienna typu const char *. Typ char * jest chyba zrozumia³y, natomiast const oznacza, ¿e przekazany ³añcuch znaków (napis) ma byæ sta³y, tzn. nie bêdzie wewn±trz funkcji modyfikowany.<br><br> Zapuszczenie kolejnego "sercza" wyja¶nia sprawê zwi±zan± z typem zwracanym przez funkcjê strlen:<p class=9ptV style="line-height: 130%" align=justify><font color=#2078A8>size_t typedef unsigned long size_t;<br> A type to define sizes of strings and memory blocks.<br> size_t is a type proposed by ANSI C for defining sizes of strings and memory blocks.<p class=9ptV style="line-height: 130%" align=justify><font color=#000000>Czyli size_t to po prostu inna nazwa typu unsigned long - typu long bez znaku. A typ unsigned long to nieujemne liczby ca³kowite (przy czym s± one kodowane na wiêkszej liczbie bitów ni¿ typ int, czyli mog± przechowaæ wiêkszy zakres warto¶ci).<br><br> Przyk³ad u¿ycia:<p class=9ptV style="line-height: 130%" align=justify><font color=#2078A8>#include &lt;iostream.h><br> #include &lt;string.h><br><br> main()<br><br> {<br> char napis[100];<br> cout<<"Podaj napis: ";<br> cin >> napis;<br> int dlugosc = strlen(napis);<br> cout << "Dlugosc napisu: " << napis<< " wynosi " << dlugosc <<endl;<br> }<p class=9ptV style="line-height: 130%" align=justify><font color=#000000>Jak widaæ u¿ycie funkcji bibliotecznej w tym przypadku jest bardzo proste. Warto jeszcze zwróciæ uwagê na liniê:<p class=9ptV style="line-height: 130%" align=justify><font color=#2078A8>int dlugosc = strlen(napis);<p class=9ptV style="line-height: 130%" align=justify><font color=#000000>To, co siê w niej dzieje, to niejawna konwersja - strlen zwraca typ size_t, który jest tak naprawdê typem unsigned long. Zwracana warto¶æ zostaje jednak przypisana zmiennej typu int. Kompilator mo¿e ostrzegaæ w takim przypadku, ¿e konwersja mo¿e spowodowaæ utratê danych, bo typ long mo¿e przechowywaæ wiêksze liczby ni¿ int. W naszym przypadku to nie ma jednak znaczenia, bo nasz program bêdzie dzia³a³ dla napisów o d³ugo¶ci do 99 znaków, a taka liczba spokojnie mie¶ci siê w typie int.<div align=center><table border=0 width=100% cellspacing=0 cellpadding=0><center><tr><td width=100%><p align=right class=9ptV><font face=Arial size=1><br> <a href=http://www.magazin.prv.pl><img border=0 src=../img/cd.gif width=47 height=20></a></font></p></td></tr></table></div></center></td></tr></table></div></td></tr><tr><center><td width=100% height=20 valign=bottom></center><div align=center><table border=0 width=586 height=20 cellspacing=0 cellpadding=0><tr><td width=135 background=../img/line3.gif><p align=right><img border=0 src=../img/line.gif></td><center><td width=330 valign=bottom><p align=center class=9ptV><a href=32.htm class=link2><font color=#2078A8>poprzednia strona</font></a><font color=#4048A8> </font><font color=#2078A8>::</font><font color=#4048A8> </font><a href=spis.htm class=link2><font color=#2078A8>spis tre¶ci</font></a><font color=#4048A8> </font><font color=#2078A8>::</font><font color=#4048A8> </font><a href=34.htm class=link2><font color=#2078A8>nastêpna strona</font></a></td><td width=135 background=../img/line3.gif><img border=0 src=../img/line2.gif width=9 height=20></td></tr></table></center></div></td></tr><tr><td width=100% height=65 valign=top background=../img/003c.png><div align=center><center><table border=0 width=592 cellspacing=0 cellpadding=0 height=55><tr><td width=590 height=55><p align=center class=9ptV><b><font color=#FFFFFF>WSZELKIE PRAWA ZASTRZE¯ONE :: COPYRIGHT &copy; MAGAZIN 2001-2003</font></b></td></tr></table></center></div></td></tr></table></div></body></html>