<html><head><meta http-equiv=Content-Type content="text/html; charset=iso-8859-2"><link rel=stylesheet href=magazin.css TYPE=text/css><title>MagaZin #17 :: grudzieñ 2003</title></head><body link=#176B9A vlink=#176B9A alink=#176B9A leftmargin=1 topmargin=15 bgcolor=#F2F2F2><div align=center><center><table border=0 width=750 cellspacing=0 cellpadding=0 style="border: 1 solid #176B9A"><tr><td width=100% style="border-bottom: 1 solid #F2F2F2" bgcolor=#1C84BB height=18><div align=center><table border=0 width=720 cellspacing=0 cellpadding=0><tr><td width=295 valign=top class=9ptV><font color=#FFFFFF><img border=0 src=../img/dir_003.gif width=6 height=7><b> </b><font face=Arial size=1 color=#FFFFFF>MAGAZIN #3/2003 (17) </font></font><font color=#FFFFFF face=Arial size=1><img border=0 src=../img/dir_003.gif width=6 height=7> GRUDZIEÑ 2003</font></td></center><td valign=top class=9ptV><p align=right><font color=#FFFFFF><img border=0 src=../img/dir_003.gif width=6 height=7><b> </b><font face=Arial size=1>MULTIMEDIALNE PISMO INTERNETOWE</font></font></td></tr></table></div></td></tr><center><tr><td width=100% height=80 style="border-bottom: 1 solid #176B9A"><img border=0 src=../img/003_top.gif width=748 height=80></td></tr><tr><td width=100% style="border-bottom: 1 solid #176B9A" bgcolor=#D1E3EF height=20><div align=center><table border=0 width=720 cellspacing=0 cellpadding=0><tr><td width=295 valign=top class=9ptV><b><font color=#176B9A><img border=0 src=../img/kwad.gif width=8 height=8> KURSY</font></b></td><td valign=top class=9ptV></td></tr></table></div></td></tr><tr><td width=100% bgcolor=#B1D3E4 style="border-bottom: 1 solid #176B9A" background=../img/003_title/cplusplus10.gif><div align=center><table border=0 width=720 cellspacing=0 cellpadding=0 height=55><tr><td width=1 valign=top><p align=right></td><td width=60 valign=middle><p align=right></td><td width=580 valign=middle height=70><i><font face=impact size=7 color=#176B9A>&nbsp;</font></i></td></center><td width=80 valign=middle height=70><p align=right></td><center><td width=1 valign=top></td></tr></table></div></center></td></tr><tr><td width=100% style="border-bottom: 1 solid #176B9A" bgcolor=#D1E3EF><div align=center><center><table border=0 width=720 cellspacing=0 cellpadding=0 height=20><tr><td width=10><p class=9ptV><img border=0 src=../img/dir_003.gif width=6 height=7></td><td width=353><p class=9ptV><a href=mailto:ralphick@poczta.onet.pl class=link2><font color=#176B9A face=Tahoma><b>Ralfik</b></font></a></td></center><td width=353><p class=9ptV align=right><img border=0 src=../img/dir_003.gif width=6 height=7> <a href=45.htm class=link2><font face=Tahoma color=#176B9A>poprzednia strona</font></a><font color=#176B9A face=Tahoma> </font><img border=0 src=../img/dir_003.gif width=6 height=7> <a href=spis.htm class=link2><font face=Tahoma color=#176B9A>spis tre¶ci</font></a><font color=#176B9A face=Tahoma> </font><img border=0 src=../img/dir_003.gif width=6 height=7> <a href=47.htm class=link2><font face=Tahoma color=#176B9A>nastêpna strona</font></a></td></tr></table></div></td></tr><center><tr><td width=100% valign=top background=../img/003_tlo2.gif><div align=center><table border=0 width=720 cellspacing=0 cellpadding=0><tr><td width=720 colspan=3 height=10></td></tr><tr><td width=350 valign=top class=9ptV><div align=center><table border=0 width=100% cellspacing=0 cellpadding=0 style="border-left: 5 solid #176B9A; border-bottom: 1 solid #176B9A"><tr><td width=100%><b><font color=#176B9A face=arial size=3>&nbsp;</font></b><b><font face=arial size=3>Odcztywanie argumentów wywo³ania<br> &nbsp;programu z linii poleceñ</font></b></td></tr></table></div><p style="line-height: 130%" align=justify><font color=#176B9A>Witam po raz dziesi±ty. Kiedy piszê te s³owa, pogoda jest taka ³adna, ¿e spêdzanie czasu przy komputerze to chyba najgorsza z mo¿liwych opcji :). Dlatego te¿ dzisiaj zajmiemy siê bardzo prost±, ale przydatn± rzecz±, jak± jest odczytywanie parametrów przekazanych do programu.</font><br> <br> <img border=0 src=../img/bl3/003_p.gif style="float: left; margin-right: 4; margin-top: 4" width=44 height=39>o skompilowaniu programu uruchamiamy go podaj±c jego nazwê. Czêsto chcemy, aby do programu przekazaæ jakie¶ dane. Oczywi¶cie mo¿na zrobiæ to tak, ¿e podczas swojego dzia³ania program bêdzie prosi³ o wprowadzenie pewnych danych, np.<br> <br> <font color=#176B9A>#include &lt;iostream.h>&nbsp;<br> <br> int main()<br> {<br> // Program podnoszacy liczbe do kwadratu<br> int a, b;<br> cout&lt;&lt;"Podaj liczbe calkowita a: ";<br> cin>>a;<br> b = a*a;<br> cout&lt;&lt;"a*a = "&lt;&lt;b&lt;&lt;endl;<br> return b;<br> }</font><br> <br> Czasem jednak to rozwi±zanie nie jest najlepsze. Wtedy mo¿na zastosowaæ przekazanie danych w linii poleceñ:<br> <br> <font color=#176B9A>#include &lt;iostream.h><br> #include &lt;stdlib.h><br> <br> int main(int argc, char **argv)<br> {<br> // Program podnoszacy liczbe do kwadratu<br> int a, b;<br> <br> if(argc!=2) // Liczba argumentow rozna od 2<br> {<br> cout&lt;&lt;"Niewlasciwa liczba argumentow!"&lt;&lt;endl;<br> //cout&lt;&lt;"Uzyj wywolania: "&lt;&lt;argv[0]&lt;&lt;" liczba"&lt;&lt;endl;<br> return -1;<br> }<br> <br> a = atoi(argv[1]); // Zamien napis na liczbe typu integer<br> <br> b = a*a;<br> cout&lt;&lt;"a*a = "&lt;&lt;b&lt;&lt;endl;<br> return b;<br> }</font><br> <br> Teraz mo¿na wywo³aæ program z linii poleceñ, np.:<br> <br> <font color=#176B9A>Program.exe 5</font><br> <br> Program podniesie liczbê 5 do kwadratu. Komentarza wymaga w szczególno¶ci linia:</p></td><td width=21 valign=top class=9ptV></td><td width=349 valign=top class=9ptV><p style="line-height: 130%" align=justify><font color=#176B9A>int main(int argc, char **argv)</font><br> <br> Tym razem g³ówna funkcja main() ma byæ wywo³ywana z dwoma argumentami. Pierwszy jest liczb± integer, a drugi tablic± napisów. Zwyczajowo pierwszy oznacza siê argc, a drugi argv, ale mo¿na u¿yæ swoich nazw. W momencie wywo³ania programu oba argumenty wype³niane s± odpowiednimi danymi. Tablica napisów wype³niania jest argumentami wywo³ania, przy czym:<br> <br> <font color=#176B9A>argv[0] - nazwa programu<br> argv[1] - pierwszy parametr<br> argv[2] - drugi parametr</font><br> <br> itd.<br> <br> Natomiast argc przyjmuje liczbê parametrów wywo³ania (w³±czaj±c w to nazwê programu). Najlepiej pokazaæ to na przyk³adzie:<br> <br> Wywo³anie:<br> <br> <font color=#176B9A>moj_program 1 205 xxx</font><br> <br> ustawi zmienne nastêpuj±co:<br> <br> <font color=#176B9A>argc = 4;<br> argv[0] = "moj_program";<br> argv[1] = "1";<br> argv[2] = "205";<br> argv[3] = "xxx";</font><br> <br> Ka¿dy z parametrów wywo³ania jest napisem. Je¶li chcemy taki napis potraktowaæ jak liczbê (by móc nastêpnie jej warto¶æ przypisaæ do zmiennych liczbowych), to musimy dokonaæ odpowiedniej konwersji. Z pomoc± przychodzi tu funkcja atoi() z biblioteki stdlib. Dokonuje ona konwersji z napisu do typu integer.<br> <br> Napisanie programu wypisuj±cego wszystkie parametry wywo³ania te¿ jest spraw± banalnie prost±:<br> <br> <font color=#176B9A>#include &lt;iostream.h><br> <br> int main(int argc, char **argv)<br> {<br> for(int i=0 ; i&lt;argc ; i++)&nbsp;<br> {<br> cout&lt;&lt;"argv[" &lt;&lt; i&lt;&lt;"] = " &lt;&lt; argv[i] &lt;&lt;endl;<br> }<br> return 0;<br> }</font><br> <br> Oczywi¶cie przekazywanie wiêkszej liczby danych poprzez argumenty w linii wywo³ania jest niewygodne. Wtedy mo¿na jako argument przekazaæ nazwê pliku (¶cie¿kê dostêpu), który nastêpnie, ju¿ wewn±trz programu, otworzymy i odczytamy z niego potrzebne dane.</p></td></tr><tr><td width=694 valign=top height=10 colspan=3></td></tr></table></div></td></tr><tr><td width=100% bgcolor=#D1E3EF style="border-top: 1 solid #176B9A"><div align=center><table border=0 width=720 cellspacing=0 cellpadding=0 height=20><tr><td width=10><p class=9ptV><img border=0 src=../img/dir_003.gif width=6 height=7></td><td width=447><p class=9ptV><font color=#176B9A face=Tahoma>Copyright &copy; </font><b><font face=Tahoma color=#176B9A>MAGAZIN</font></b><font color=#176B9A face=Tahoma> 2001-2003 | Wszystkie prawa zastrze¿one</font></td><td width=259><p class=9ptV align=right><img border=0 src=../img/dir_003.gif width=6 height=7> <a href=45.htm class=link2><font face=Tahoma color=#176B9A>poprzednia strona</font></a><font color=#176B9A face=Tahoma> </font><img border=0 src=../img/dir_003.gif width=6 height=7> <a href=spis.htm class=link2><font face=Tahoma color=#176B9A>spis tre¶ci</font></a><font color=#176B9A face=Tahoma> </font><img border=0 src=../img/dir_003.gif width=6 height=7> <a href=47.htm class=link2><font face=Tahoma color=#176B9A>nastêpna strona</font></a></td></tr></table></div></td></tr></center><center></table></center></div></body></html>