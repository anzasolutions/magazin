<html><head><meta http-equiv=Content-Type content="text/html; charset=iso-8859-2"><link rel=stylesheet href=magazin.css TYPE=text/css><title>MagaZin #7 :: Styczeñ 2002</title></head><body link=#478DE7 vlink=#478DE7 alink=#478DE7 topmargin=0 bottommargin=0 background=../img/elec1.gif><div align=center><center><table border=0 width=720 cellspacing=0 cellpadding=0 height=742><tr><td width=3 bgcolor=#000000 height=558>&nbsp;</td><td width=171 bgcolor=#0080C0 height=558 valign=top><div align=center><table border=0 width=90% cellspacing=0 cellpadding=0 height=5><tr><td width=100% height=15 valign=top></td></tr><tr><td width=100% height=5 valign=top><p align=center><img border=0 src=../img/mt_d.gif width=120 height=121></td></tr><tr><td width=100% height=15 valign=top></td></tr><tr><td width=100% height=1 valign=top><hr color=#FFFFFF size=1></td></tr><tr><td width=100% height=7 valign=top><p align=center class=9ptV><b><font color=#D1D1D1>MENU</font></b></td></tr><tr><td width=100% height=1 valign=top><hr color=#FFFFFF size=1></td></tr><tr><td width=100% height=5 valign=top></td></tr><tr><td width=100% height=3 valign=top><p class=9ptV align=center><a href=01_02.htm#i class=link2><font color=#FFFFFF><b>INTRODUKCJA</b></font></a><b><font color=#FFFFFF><br> </font></b><a href=01_02.htm#g class=link2><font color=#FFFFFF><b>GRAMY!</b></font></a><b><font color=#FFFFFF><br> </font></b><a href=01_02.htm#k class=link2><font color=#FFFFFF><b>KOMPUTER</b></font></a><b><font color=#FFFFFF><br> </font></b><a href=01_02.htm#c class=link2><font color=#FFFFFF><b>CZYTELNIA</b></font></a><b><font color=#FFFFFF><br> </font></b><a href=01_02.htm#f class=link2><font color=#FFFFFF><b>FILM</b></font></a><b><font color=#FFFFFF><br></font></b></td></tr><tr><td width=100% height=5 valign=top></td></tr><tr><td width=100% height=1 valign=top><hr color=#FFFFFF size=1></td></tr><tr><td width=100% height=5 valign=top></td></tr><tr><td width=100% height=5 valign=top><p class=9ptV align=center><b><font color=#D1D1D1>WWW:</font></b><br> <a href=http://www.magazin.prv.pl class=link2><font color=#FFFFFF><b>www.magazin.prv.pl</b> </font></a><font color=#FFFFFF><b><br> </b></font><br> <b><font color=#D1D1D1>E-mail:</font></b><br> <a href=mailto:magazin@hoga.pl class=link2><font color=#FFFFFF><b>magazin@hoga.pl</b></font></a><font color=#FFFFFF><b><br> </b><a href=mailto:listy.magazin@hoga.pl class=link2><font color=#FFFFFF><b>listy.magazin@hoga.pl</b></font></a><b><br></b></font></td></tr></center><center></table></div></center></td><td width=4 bgcolor=#000000 height=558>&nbsp;</td><td width=539 bgcolor=#F3F3F3 height=558 valign=top><div align=center><table border=0 width=516 cellspacing=0 cellpadding=0><tr><td width=514 height=10 colspan=3></td></tr><tr><td width=85 height=10><p class=9ptV><a href=03_12.htm class=link2>&lt; poprzednia</a></p></td><td width=381 height=10><p align=center class=9ptV><b>30</b></td><td width=85 height=10><p align=right class=9ptV><a class=link2 href=03_14.htm>nastêpna &gt;</a></td></tr><center><tr><td width=514 height=20 valign=middle colspan=3><hr color=#000000 size=1></td></tr></center><tr><td width=514 colspan=3><p align=left class=u><font face=Arial size=4>Uprawnienia w UNIXie</font></p></td></tr><center><tr><td width=514 height=10 valign=top colspan=3><hr color=#000000 size=1></td></tr></center><tr><td width=514 class=9ptV colspan=3><p align=justify class=9ptV><br> <b>Wstêp</b><br> <br> Jak wiadomo w systemach takich jak UNIX czy Linux ka¿dy u¿ytkownik ma dostêp tylko do niektórych plików. Dziêki temu nikt nie mo¿e np. zmodyfikowaæ cudzej strony. W tym krótkim tek¶cie wyja¶niê zasady, na jakich s± nadawane uprawnienia do plików. Polecam zapoznanie siê z nimi zarówno osobom które chc± tworzyæ w³asne skrypty CGI lub PHP, jak równie¿ osobom które chcia³yby skorzystaæ z ju¿ istniej±cych. Aby móc skorzystaæ ze wszystkich podanych komend potrzebny bêdzie dostêp do shella (przez telnet lub ssh). Je¿eli dysponujemy tylko dostêpem przez FTP, jedyn± mo¿liw± do wykorzystania komend± bêdzie chmod.<br> <br> <b>U¿ytkownicy i grupy</b><br> <br> Do ka¿dego pliku jest przypisany identyfikator w³a¶ciciela - u¿ytkownika który stworzy³ ten plik, oraz grupy - czyli zbioru u¿ytkowników którzy maj± do tego pliku uprawnienia inne od pozosta³ych. Tak wiêc mo¿liwe jest np. ¿e do pliku aaa.txt mo¿e zapisywaæ i odczytywaæ tylko jego w³a¶ciciel, odczytywaæ z niego dane mo¿e ca³a grupa, a pozostali u¿ytkownicy nie maj± do niego ¿adnych uprawnieñ. Mo¿liwa jest te¿ oczywi¶cie sytuacja, w której uprawnienia u¿ytkownika, grupy i pozosta³ych s± takie same.<br> <br> <b>Odczyt, zapis i wykonanie</b><br> <br> Istniej± 3 podstawowe prawa dostêpu do pliku: prawo do odczytu, zapisu i uruchomienia pliku. Prawa te s± nadawane niezale¼nie w³a¶cicielowi pliku, grupie do której plik nale¿y i pozosta³ym u¿ytkownikom. Aby dowiedzieæ siê, jakie uprawnienia s± ustawione dla poszczególnych plików u¿ywa siê komendy ls -l. Podaje ona przy ka¿dym pliku w bie¿±cym katalogu nazwê w³a¶ciciela i grupy do której nale¿y plik, oraz nadane im uprawnienia. Uprawnienia s± przedstawione w formie rwxr-x---. Litera oznacza ustawione uprawnienie, kreska brak uprawnienia. Grupy znaków (po 3 od lewej) oznaczaj± kolejno uprawnienia dla w³a¶ciciela, grupy i pozosta³ych u¿ytkowników. W tym przyk³adzie w³a¶ciciel mo¿e zapisywaæ, czytaæ i uruchamiaæ plik, grupa mo¿e go tylko odczytaæ i uruchomiæ, natomiast pozostali u¿ytkownicy nie maj± dostêpu do pliku.<br> Do zmiany uprawnieñ s³u¿y komenda chmod nowe_uprawnienia nazwa_pliku. Nowe uprawnienia s± zapisane jako 3-cyfrowa liczba. Cyfry od lewej oznaczaj± uprawnienia dla w³a¶ciciela, grupy i pozosta³ych. S± one sum± cyfr 4 dla odczytu, 2 dla zapisu i 1 dla uruchomienia. Aby wiêc ustawiæ uprawnienia tak jak w powy¿szym przyk³adzie, nale¿y wydaæ polecenie chmod 750 nazwa_pliku.<br> <br> <b>Czyje uprawniewnia ma skrypt</b><br> <br> Program po uruchomieniu dzia³a z uprawnieniami takimi, jak osoba która go uruchomi³a. W przypadku skryptów PHP i CGI jest to zwykle specjalny u¿ytkownik httpd, nale¿±cy do grupy o tej samej nazwie. Istnieje jednak mo¿liwo¶æ uruchomienia programu z uprawnieniami w³a¶ciciela - aby by³o to mo¿liwe w³a¶ciciel musi ustawiæ w uprawnieniach do pliku pole zwane SUID (skrót od Set User ID on execution). Aby to zrobiæ nale¿y wydaæ komendê chmod +s nazwa_pliku. Uwaga: nie ka¿dy serwer na to pozwala.<br> Jednak w przypadku skryptów PHP nie ma mo¿liwo¶ci skorzystania z SUIDa. Jedynym sposobem nadania uprawnieñ do pliku dla skryptu PHP jest wiêc nadanie ich wszystkim, lub zmiana grupy do której plik nale¿y na httpd i nadanie uprawnieñ grupie. Do zmiany grupy do której nale¿y plik s³u¿y komenda chgrp nowa_grupa nazwa_pliku.<br> <br> <b>Ustawianie uprawnieñ w klientach FTP</b><br> <br> Windows Commander - zaznacz plik, wybierz Change Attributes z menu File. Pojawi siê okno w którym trzeba ustawiæ potrzebne uprawnienia i klikn±æ ok.<br> WS_FTP - zaznacz plik, kliknij prawym przyciskiem i wybierz chmod (UNIX). Pojawi siê okno w którym trzeba ustawiæ potrzebne uprawnienia i klikn±æ ok.<br> <br> <b>Uwagi koñcowe</b><br> <br> Mam nadziejê, ¿e ten tekst wyja¶ni³ podstawy systemu uprawnieñ do plików. Pamiêtaj jednak, ¿e przy nadawaniu skryptom uprawnieñ trzeba bardzo uwa¿aæ. Zwróæ uwagê, ¿e np. skrypt z ustawionym SUIDem ma mo¿liwo¶æ zapisu do wszystkich Twoich plików. Sprawd¼ wiêc dobrze, czy nie ma w nim b³êdów, które pozwoli³yby na uszkodzenie lub modyfikacjê plików, których skrypt nie powinien modyfikowaæ.<br> <br></td></tr><tr><td width=514 colspan=3><hr color=#000000 size=1></td></tr><tr><td width=514 colspan=3><p align=right class=9ptV>Artuku³ <a href=mailto:ygreg@and.pl class=link2><b>Grzegorza Plabañskiego</a> </b>pochodz±cy ze strony<b> </b><a href=http://ygreg.and.pl class=link2><b>ygreg.and.pl</b></a></td></tr></table></div></td><td width=4 bgcolor=#000000 height=558>&nbsp;</td></tr><tr><td width=3 bgcolor=#000000 height=20 rowspan=2>&nbsp;</td><td width=171 bgcolor=#0080C0 height=20 valign=top rowspan=2>&nbsp;</td><td width=4 bgcolor=#000000 height=20 rowspan=2>&nbsp;</td><td width=539 bgcolor=#F3F3F3 height=15 valign=top><hr color=#000000 size=1 width=95%></td><td width=4 bgcolor=#000000 height=20 rowspan=2>&nbsp;</td></tr><tr><td width=539 bgcolor=#F3F3F3 height=20 valign=top><p align=center class=9ptV>Copyright &copy; MagaZin 2001-2002</td></tr></table></div></body></html>